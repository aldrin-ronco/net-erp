<UserControl x:Class="NetErp.Treasury.Masters.Views.TreasuryRootMasterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:cal="http://caliburnmicro.com"
             xmlns:model="clr-namespace:NetErp.Treasury.Masters.DTO"
             xmlns:h="clr-namespace:NetErp.Helpers"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:viewmodel="clr-namespace:NetErp.Treasury.Masters.ViewModels"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:local="clr-namespace:NetErp.Treasury.Masters.Views"
             xmlns:editors="clr-namespace:NetErp.Treasury.Masters.Views.Editors"
             xmlns:pe="clr-namespace:NetErp.Treasury.Masters.PanelEditors"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800" Background="Transparent">
    <UserControl.Resources>
        <h:BindingProxy x:Key="DataContextProxy" Data="{Binding}"/>
        <h:StringToBooleanConverter x:Key="StringToBooleanConverter"/>
        <h:CharToBooleanConverter x:Key="CharToBooleanConverter"/>
        <h:EnumToVisibilityConverter x:Key="EnumToVisibilityConverter"/>
        <!-- Unified CashDrawerDummyDTO template (replaces MajorCashDrawerDummyDTO and MinorCashDrawerDummyDTO) -->
        <HierarchicalDataTemplate DataType="{x:Type model:CashDrawerDummyDTO}" ItemsSource="{Binding Locations, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent">
                <Image Width="18" Height="18" VerticalAlignment="Center">
                    <Image.Style>
                        <Style TargetType="Image">
                            <Style.Triggers>
                                <!--Close Folder-->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="false"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderClose.svg'}"/>
                                </MultiDataTrigger>
                                <!--Open Folder-->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="true"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderOpen.svg'}"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center"/>
            </StackPanel>
        </HierarchicalDataTemplate>
        <HierarchicalDataTemplate DataType="{x:Type model:BankDummyDTO}" ItemsSource="{Binding Banks, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                    <MenuItem Command="{Binding Data.CreateBankCommand, Source={StaticResource DataContextProxy}}"
                                Header="Crear nuevo banco">
                        <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Actions/AddItem_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" VerticalAlignment="Center">
                <Image.Style>
                    <Style TargetType="Image">
                        <Style.Triggers>

                            <!--Close Folder-->

                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding Row.IsExpanded}" Value="false"/>
                                </MultiDataTrigger.Conditions>

                                <!--PlaceHolderImage-->

                                <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderClose.svg'}"/>
                            </MultiDataTrigger>

                            <!--Open Folder-->

                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding Row.IsExpanded}" Value="true"/>
                                </MultiDataTrigger.Conditions>
                                <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderOpen.svg'}"/>
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
                </Image>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center"/>
            </StackPanel>
        </HierarchicalDataTemplate>
        <HierarchicalDataTemplate DataType="{x:Type model:FranchiseDummyDTO}" ItemsSource="{Binding Franchises, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <MenuItem Command="{Binding Data.CreateFranchiseCommand, Source={StaticResource DataContextProxy}}"
                                Header="Crear nueva franquicia">
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Actions/AddItem_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" VerticalAlignment="Center">
                    <Image.Style>
                        <Style TargetType="Image">
                            <Style.Triggers>

                                <!--Close Folder-->

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="false"/>
                                    </MultiDataTrigger.Conditions>

                                    <!--PlaceHolderImage-->

                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderClose.svg'}"/>
                                </MultiDataTrigger>

                                <!--Open Folder-->

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="true"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderOpen.svg'}"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center"/>
            </StackPanel>
        </HierarchicalDataTemplate>
        <!-- Unified CashDrawerCompanyLocationDTO template (replaces TreasuryMajorCashDrawerCompanyLocationMasterTreeDTO and TreasuryMinorCashDrawerCompanyLocationMasterTreeDTO) -->
        <HierarchicalDataTemplate DataType="{x:Type model:CashDrawerCompanyLocationDTO}" ItemsSource="{Binding CostCenters, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent">
                <Image Width="18" Height="18" VerticalAlignment="Center">
                    <Image.Style>
                        <Style TargetType="Image">
                            <Style.Triggers>
                                <!--Close Folder-->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="false"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderClose.svg'}"/>
                                </MultiDataTrigger>
                                <!--Open Folder-->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="true"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderOpen.svg'}"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center"/>
            </StackPanel>
        </HierarchicalDataTemplate>
        <HierarchicalDataTemplate DataType="{x:Type model:TreasuryBankMasterTreeDTO}" ItemsSource="{Binding BankAccounts, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <MenuItem Command="{Binding Data.DeleteBankCommand, Source={StaticResource DataContextProxy}}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Eliminar banco: "/>
                                    <TextBlock Text="{Binding Row.AccountingEntity.SearchName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Edit/Delete_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem Command="{Binding Data.CreateBankAccountCommand, Source={StaticResource DataContextProxy}}" Header="Crear nueva cuenta bancaria">
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Actions/AddItem_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" VerticalAlignment="Center">
                    <Image.Style>
                        <Style TargetType="Image">
                            <Style.Triggers>

                                <!--Close Folder-->

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="false"/>
                                    </MultiDataTrigger.Conditions>

                                    <!--PlaceHolderImage-->

                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderClose.svg'}"/>
                                </MultiDataTrigger>

                                <!--Open Folder-->

                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="true"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderOpen.svg'}"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
                <TextBlock Text="{Binding Row.AccountingEntity.SearchName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center"/>
            </StackPanel>
        </HierarchicalDataTemplate>
        <!-- Unified CashDrawerCostCenterDTO template (replaces TreasuryMajorCashDrawerCostCenterMasterTreeDTO and TreasuryMinorCashDrawerCostCenterMasterTreeDTO) -->
        <HierarchicalDataTemplate DataType="{x:Type model:CashDrawerCostCenterDTO}" ItemsSource="{Binding CashDrawers, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <!-- Menu item for Major (Caja General) - visible only when Type is Major -->
                        <MenuItem Command="{Binding Data.CreateMajorCashDrawerCommand, Source={StaticResource DataContextProxy}}"
                                  Visibility="{Binding Row.Type, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter='Major:Visible;Minor:Collapsed'}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Crear nueva caja general en: "/>
                                    <TextBlock Text="{Binding Row.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Actions/AddItem_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <!-- Menu item for Minor (Caja Menor) - visible only when Type is Minor -->
                        <MenuItem Command="{Binding Data.CreateMinorCashDrawerCommand, Source={StaticResource DataContextProxy}}"
                                  Visibility="{Binding Row.Type, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter='Minor:Visible;Major:Collapsed'}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Crear nueva caja menor en: "/>
                                    <TextBlock Text="{Binding Row.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Actions/AddItem_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" VerticalAlignment="Center">
                    <Image.Style>
                        <Style TargetType="Image">
                            <Style.Triggers>
                                <!--Close Folder-->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="false"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderClose.svg'}"/>
                                </MultiDataTrigger>
                                <!--Open Folder-->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Row.IsExpanded}" Value="true"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Source" Value="{dx:DXImage 'SvgImages/Icon Builder/Actions_FolderOpen.svg'}"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center"/>
            </StackPanel>
        </HierarchicalDataTemplate>
        <HierarchicalDataTemplate DataType="{x:Type model:MajorCashDrawerMasterTreeDTO}" ItemsSource="{Binding AuxiliaryCashDrawers, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent" ToolTip="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <MenuItem Command="{Binding Data.CreateAuxiliaryCashDrawerCommand, Source={StaticResource DataContextProxy}}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Crear nueva caja auxiliar en: "/>
                                    <TextBlock Text="{Binding Row.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Actions/AddItem_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem Command="{Binding Data.DeleteMajorCashDrawerCommand, Source={StaticResource DataContextProxy}}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Eliminar caja general: "/>
                                    <TextBlock Text="{Binding Row.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Edit/Delete_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" Source="{dx:DXImage 'Images/Spreadsheet/FunctionsFinancial_16x16.png'}" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="2 0 0 0" VerticalAlignment="Center"/>
            </StackPanel>
        </HierarchicalDataTemplate>
        <DataTemplate DataType="{x:Type model:TreasuryAuxiliaryCashDrawerMasterTreeDTO}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent" ToolTip="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <MenuItem Command="{Binding Data.DeleteAuxiliaryCashDrawerCommand, Source={StaticResource DataContextProxy}}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Eliminar caja auxiliar: "/>
                                    <TextBlock Text="{Binding Row.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Edit/Delete_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" Source="{dx:DXImage 'Images/Miscellaneous/HighlightActiveElements_16x16.png'}" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="2 0 0 0" VerticalAlignment="Center"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate DataType="{x:Type model:MinorCashDrawerMasterTreeDTO}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent" ToolTip="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <MenuItem Command="{Binding Data.DeleteMinorCashDrawerCommand, Source={StaticResource DataContextProxy}}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Eliminar caja menor: "/>
                                    <TextBlock Text="{Binding Row.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Edit/Delete_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" Source="{dx:DXImage 'Images/Spreadsheet/FunctionsFinancial_16x16.png'}" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="2 0 0 0" VerticalAlignment="Center"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate DataType="{x:Type model:TreasuryBankAccountMasterTreeDTO}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent" ToolTip="{Binding Row.Description, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <MenuItem Command="{Binding Data.DeleteBankAccountCommand, Source={StaticResource DataContextProxy}}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Eliminar cuenta bancaria: "/>
                                    <TextBlock Text="{Binding Row.Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Edit/Delete_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" Source="{dx:DXImage 'Images/Miscellaneous/HighlightActiveElements_16x16.png'}" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding Row.Description, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="2 0 0 0" VerticalAlignment="Center"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate DataType="{x:Type model:TreasuryFranchiseMasterTreeDTO}">
            <StackPanel Orientation="Horizontal" Margin="-1,0,0,0" VerticalAlignment="Center" Background="Transparent">
                <StackPanel.ContextMenu>
                    <ContextMenu>
                        <MenuItem Command="{Binding Data.DeleteFranchiseCommand, Source={StaticResource DataContextProxy}}">
                            <MenuItem.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Eliminar franquicia: "/>
                                    <TextBlock Text="{Binding Row.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </StackPanel>
                            </MenuItem.Header>
                            <MenuItem.Icon>
                                <Image Source="{dx:DXImage 'Images/Edit/Delete_16x16.png'}"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </StackPanel.ContextMenu>
                <Image Width="18" Height="18" Source="{dx:DXImage 'Images/Miscellaneous/HighlightActiveElements_16x16.png'}" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding Row.Name, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Margin="2 0 0 0" VerticalAlignment="Center"/>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>
    <Grid Background="Transparent">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.4*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid Margin="0 10 0 0" Grid.Column="0" Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <dxg:TreeViewControl Background="Transparent"
                        ItemsSource="{Binding DummyItems, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        h:TreeViewExtension.SelectItemOnRightClick="True"
                        HighlightSelectedNodeIndent="False"
                        AutoScrollCurrentNode="True"
                        BorderThickness="0"
                        ShowExpandButtons="True"
                        ShowBorder="False"
                        AllowDragDrop="False"
                        ExpandStateBinding="{Binding IsExpanded, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        SelectedItem="{Binding SelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        TreeDerivationMode="HierarchicalDataTemplate"
                        AllowEditing="False"
                        IsEnabled="{Binding TreeViewIsEnable, UpdateSourceTrigger=PropertyChanged}">

                <dxg:TreeViewControl.Resources>
                    <Style TargetType="TextBlock">
                        <Setter Property="TextWrapping" Value="Wrap"/>
                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                    </Style>
                    <Style TargetType="dxg:TreeViewControlView">
                        <EventSetter Event="Loaded" Handler="TreeViewControlView_Loaded"/>
                    </Style>
                </dxg:TreeViewControl.Resources>
                <dxg:TreeViewControl.NodeStyle>
                    <Style TargetType="dxg:RowControl">
                        <Setter Property="Foreground" Value="Black"/>
                        <Style.Triggers>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding Row.IsExpanded}" Value="true"/>
                                </MultiDataTrigger.Conditions>
                                <Setter Property="Foreground" Value="Blue"/>
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>
                </dxg:TreeViewControl.NodeStyle>
            </dxg:TreeViewControl>
        </Grid>

        <Grid Grid.Column="1">
            <ContentControl Content="{Binding CurrentPanelEditor, UpdateSourceTrigger=PropertyChanged}"
                Visibility="{Binding ContentControlVisibility, Converter={dx:BooleanToVisibilityConverter}, UpdateSourceTrigger=PropertyChanged}">
                <ContentControl.Resources>
                    <DataTemplate DataType="{x:Type pe:MajorCashDrawerPanelEditor}">
                        <editors:MajorCashDrawerEditorView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type pe:MinorCashDrawerPanelEditor}">
                        <editors:MinorCashDrawerEditorView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type pe:AuxiliaryCashDrawerPanelEditor}">
                        <editors:AuxiliaryCashDrawerEditorView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type pe:BankPanelEditor}">
                        <editors:BankEditorView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type pe:BankAccountPanelEditor}">
                        <editors:BankAccountEditorView/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type pe:FranchisePanelEditor}">
                        <editors:FranchiseEditorView/>
                    </DataTemplate>
                </ContentControl.Resources>
            </ContentControl>
        </Grid>
    </Grid>
</UserControl>
